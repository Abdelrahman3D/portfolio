!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(2);function i(e){return e.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))}function r(e){"function"==typeof e&&e()}function o(e){return"string"!=typeof e?e:document.querySelector(e)}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.graphContainer,this.slidersContainer,this.modesContainer,this.mode,this.modes=[],this.lastPartChanged="",this.sliders={},this.state=!0,this.changing=!1,this.rotateValue=0,this.translateValue=0,this.listeners=[],this.init(t,n,i)}var t,n,r;return t=e,(n=[{key:"init",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".controller__sliders",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".controller__modes";this.graphContainer=o(e),this.slidersContainer=o(n),this.modesContainer=o(i),this.mode=new Proxy({current:"",previous:""},{get:function(e,t){return e[t]},set:function(e,n,i){return e[n]=i,"current"===n&&(t.graphContainer.className.baseVal=i),!0}})}},{key:"disable",value:function(){this.state=!1}},{key:"enable",value:function(){this.state=!0}},{key:"addEventListener",value:function(e,t){this.listeners.push({name:e,callback:t})}},{key:"updateSlidersArray",value:function(e){this.sliders[i(e)]=o('.range-slider__input[name="'.concat(e,'"]'))}},{key:"newModeButton",value:function(e,t){var n=this,i='<a class="mode__button '.concat(e,'">\n            ').concat(t,"\n        </a>");this.modesContainer.insertAdjacentHTML("beforeend",i),document.querySelector(".mode__button.".concat(e)).addEventListener("click",(function(){return n.clickModeButton(e)})),this.modes.push(e)}},{key:"newSlider",value:function(e){var t=this,n=e.part,r=e.origin,o=void 0===r?"50% 50%":r,s=e.rotate,a=void 0===s?"clockwise":s,c=e.degree,l=void 0===c?90:c,u=e.direction,d=void 0===u?"Y":u,h=e.distance,m=void 0===h?0:h,v=e.min,f=void 0===v?0:v,g=e.max,p=void 0===g?10:g;this.slidersContainer.insertAdjacentHTML("beforeend",'<div class="range-slider">\n        <input class="range-slider__input" type="range" name="'.concat(n,'" min="').concat(f,'" max="').concat(p,'" value="0">\n        <span class="range-slider__value"></span>\n      </div>')),this.updateSlidersArray(n);var y=document.getElementById(n),k=document.getElementsByName(n)[0],_=k.parentNode.querySelector(".range-slider__value");y.style.transformOrigin=o,_.innerHTML=k.value,k.addEventListener("input",(function(){t.state&&(t.changing=!0,t.lastPartChanged=i(n),t.rotateValue=("clockwise"==a?1:-1)*k.value*l/k.max,t.translateValue=k.value*m/k.max,_.innerHTML=k.value,y.style.transform="rotate(".concat(t.rotateValue,"deg) translate").concat(d.toUpperCase(),"(").concat(t.translateValue,"px)"),t.changing=!1,t.listeners.filter((function(e){return"sliderChanged"===e.name})).forEach((function(e){e.callback(t.lastPartChanged)})))}))}},{key:"morph",value:function(e,t){e=o(e),t=o(t).getAttribute("d"),document.getElementById("mouth").setAttribute("d",t)}},{key:"changeMode",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n||""==this.mode.current?this.mode.previous=e:this.mode.previous=this.mode.current,this.mode.current=e,this.listeners.filter((function(e){return"modeChanged"===e.name})).forEach((function(e){e.callback(t.mode.current,t.mode.previous)}))}},{key:"clickModeButton",value:function(e){this.currentMode!=e&&this.state&&(Array.from(document.querySelectorAll(".mode__button")).forEach((function(e){return e.classList.remove("active")})),o(".mode__button.".concat(e)).classList.add("active"),this.changeMode(e))}},{key:"changeSlider",value:function(e,t){e.value=t,e.dispatchEvent(new Event("input")),e.dispatchEvent(new Event("change"))}},{key:"random",value:function(){var e=this;Object.keys(this.sliders).forEach((function(t){var n=e.sliders[t];e.changeSlider(n,Math.random()*n.max+Math.random()*n.min)})),setTimeout((function(){e.changing=!1}),500)}},{key:"reset",value:function(){var e=this;Object.keys(this.sliders).forEach((function(t){var n=e.sliders[t];e.changeSlider(n,0)})),setTimeout((function(){e.changing=!1}),500)}}])&&s(t.prototype,n),r&&s(t,r),e}();function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.controller,this.graphContainer,this.element,this.setting,this.position,this.currentX=0,this.currentY=0,this.moveFunction,this.init(t,n,i)}var t,n,i;return t=e,(n=[{key:"init",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=i.dragMode,a=void 0===s?"dragging":s,c=i.select,l=i.move,u=i.release;this.controller=e,this.graphContainer=e.graphContainer,this.element=o(t),this.element.setAttribute("style","transform: translate(0, 0)"),this.settings={dragMode:a,select:c,move:l,release:u},this.element.addEventListener("mousedown",(function(e){return n.select(e)})),this.element.addEventListener("touchstart",(function(e){return n.touch(e)})),this.position=new Proxy({x:0,y:0},{get:function(e,t){return e[t]},set:function(e,t,i){return e[t]=i,n.moveElement(n.element,n.position.x,n.position.y),r(n.settings.move),!0}})}},{key:"release",value:function(){this.graphContainer.removeEventListener("mousemove",this.moveFunction),this.graphContainer.removeEventListener("touchmove",this.moveFunction),this.controller.changeMode(this.controller.mode.previous,!0),r(this.settings.release)}},{key:"moveElement",value:function(e,t,n){e.setAttribute("style","transform: translate(".concat(t,"px, ").concat(n,"px)"))}},{key:"move",value:function(e){var t=0,n=0,i=this.graphContainer,r=this.graphContainer.viewBox.baseVal;if(i.clientWidth>i.clientHeight?(n=r.height/i.clientHeight,t=r.width/i.clientHeight):(n=r.height/i.clientWidth,t=r.width/i.clientWidth),"touchmove"==e.type){var o=e.touches[0].clientX-this.currentX,s=e.touches[0].clientY-this.currentY;return this.position.x+=o*t,this.position.y+=s*n,this.currentX=e.touches[0].clientX,void(this.currentY=e.touches[0].clientY)}var a=e.clientX-this.currentX,c=e.clientY-this.currentY;this.position.x+=a*t,this.position.y+=c*n,this.currentX=e.clientX,this.currentY=e.clientY}},{key:"select",value:function(e){var t=this;e.preventDefault(),1==e.buttons&&(this.controller.changeMode(this.settings.dragMode,!1),this.currentX=e.clientX,this.currentY=e.clientY,this.currentPosition(),this.graphContainer.addEventListener("mousemove",this.moveFunction=function(e){return t.move(e)}),this.graphContainer.addEventListener("mouseup",(function(){t.release()})),document.addEventListener("mouseout",(function(e){null==e.toElement&&null==e.relatedTarget&&t.release()})),r(this.settings.select))}},{key:"touch",value:function(e){var t=this;this.controller.changeMode(this.settings.dragMode,!1),this.currentX=e.touches[0].clientX,this.currentY=e.touches[0].clientY,this.currentPosition(),this.graphContainer.addEventListener("touchmove",this.moveFunction=function(e){return t.move(e)}),this.graphContainer.addEventListener("touchend",(function(){t.release()})),r(this.settings.select)}},{key:"currentPosition",value:function(){var e=this.element.style.transform.slice(10,-1).split(", ");this.position.x=parseFloat(e[0]),this.position.y=parseFloat(e[1])}}])&&c(t.prototype,n),i&&c(t,i),e}();function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var d=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.controller,this.draggable,this.timelineValues=[],this.time=0,this.trackers=[],this.timelineAnimation="",this.init(t,n,i)}var t,n,i;return t=e,(n=[{key:"init",value:function(e,t,n){var i=this;this.controller=e,this.trackers=n,document.querySelector(t).insertAdjacentHTML("beforeend",'\n  <div class="timeline__container">\n    <div class="timeline__track">\n    </div>\n  </div>\n  <div class="timeline__buttons">\n    <a class="timeline__play play timeline__button">\n      <svg class="timeline__icon" viewBox="0 0 50 50">\n        <title>timeline play</title>\n        <polygon id="play" points="5,1.9 45,25 5,48.1 "/>\n        <g id="pause">\n          <rect x="10.4" y="4" width="11.2" height="41.9"/>\n          <rect x="28.4" y="4" width="11.2" height="41.9"/>\n        </g>\n      </svg>\n      <a class="timeline__record timeline__button">\n        <svg class="timeline__icon" viewBox="0 0 50 50">\n          <title>timeline record</title>\n          <circle cx="25" cy="25" r="20"/>\n        </svg>\n      </a>\n      <a class="timeline__keyframe timeline__button">\n        <svg class="timeline__icon" viewBox="0 0 50 50">\n          <title>timeline keyframe</title>\n          <rect y="21.5" width="50" height="7"/>\n          <rect x="21.5" y="0" width="7" height="50"/>\n        </svg>\n      </a>\n    </a>\n  </div>'),document.querySelector(".timeline__play").addEventListener("click",(function(){return i.playPause(document.querySelector(".timeline__play"))})),document.querySelector(".timeline__record").addEventListener("click",(function(){return i.recordFrame()})),document.querySelector(".timeline__keyframe").addEventListener("click",(function(){return i.addFrame()}))}},{key:"updateTime",value:function(e){this.time=e}},{key:"updateFrames",value:function(){var e=this;this.frames=Array.from(document.querySelectorAll(".timeline__frame")),this.frames.forEach((function(t,n){t.addEventListener("click",(function(){return e.cursorPositioning(n)}))}))}},{key:"recordFrame",value:function(){var e={};this.trackers.forEach((function(t){Object.keys(t).forEach((function(n){void 0===t[n].value?e[n]=t[n]:e[n]=t[n].value}))})),this.timelineValues[this.time]=e}},{key:"playFrame",value:function(){var e=this;null!=this.timelineValues[this.time]&&this.trackers.forEach((function(t){Object.keys(t).forEach((function(n){void 0===t[n].value?t[n]=e.timelineValues[e.time][n]:(t[n].value=e.timelineValues[e.time][n],t[n].dispatchEvent(new Event("input")),t[n].dispatchEvent(new Event("change")))}))}))}},{key:"playTimeline",value:function(){var e=this;this.timelineAnimation=setInterval((function(){e.time==e.frames.length-1?e.cursorPositioning(0):e.cursorPositioning(e.time+1)}),1e3)}},{key:"pauseTimeline",value:function(){clearInterval(this.timelineAnimation)}},{key:"playPause",value:function(e){e.classList.contains("play")?(e.classList.remove("play"),e.classList.add("pause"),this.playTimeline()):e.classList.contains("pause")&&(e.classList.remove("pause"),e.classList.add("play"),this.pauseTimeline())}},{key:"addFrame",value:function(){document.querySelector(".timeline__track").insertAdjacentHTML("beforeend",'<a class="timeline__frame" href="#"></a>'),this.updateFrames(),this.cursorPositioning(this.frames.length-1),this.recordFrame()}},{key:"cursorPositioning",value:function(e){this.updateTime(e),this.frames.forEach((function(e){return e.classList.remove("active")})),this.frames[this.time].classList.add("active"),this.playFrame()}}])&&u(t.prototype,n),i&&u(t,i),e}(),h=document.querySelector("#ballon"),m=document.querySelector("#body"),v=document.querySelector("#head"),f=document.querySelector("#bag-body"),g=new a("#character",".controller__sliders",".controller__modes"),p=new l(g,"#drag-area",{dragMode:"🙄",move:function(){var e=.0015*p.position.y;e>0?e=0:e<-.9&&(e=-.9),shadow.setAttribute("style","transform: translate(".concat(p.position.x,"px, 0) scale(").concat(e+1,")")),p.position.x>=0?(h.classList.remove("💫"),p.moveElement(h,p.position.x,0)):(h.classList.add("💫"),p.moveElement(h,p.position.x+620,0))},release:function(){p.position.y=0,p.moveElement(shadow,p.position.x,0)}});new d(g,".timeline",[g.sliders,p.position,g.mode]),g.newModeButton("😃",'<svg class="👽"><use xlink:href="#😃"/></svg>'),g.newModeButton("😡",'<svg class="👽"><use xlink:href="#😡"/></svg>'),g.newModeButton("😍",'<svg class="👽"><use xlink:href="#😍"/></svg>'),g.newModeButton("😴",'<svg class="👽"><use xlink:href="#😴"/></svg>'),g.clickModeButton("😃"),g.newSlider({part:"head",origin:"512px 490px 10px",degree:30,min:-10,max:10}),g.newSlider({part:"eyebrows-r",origin:"506px 304px",rotate:"clockwise",degree:10,distance:-10}),g.newSlider({part:"eyebrows-l",origin:"517px 304px",rotate:"anti-clockwise",degree:10,distance:-10}),g.newSlider({part:"arm-r",origin:"457px 523px",rotate:"clockwise"}),g.newSlider({part:"hand-r",origin:"444px 612px",rotate:"clockwise"}),g.newSlider({part:"arm-l",origin:"569px 523px",rotate:"anti-clockwise"}),g.newSlider({part:"hand-l",origin:"580px 612px",rotate:"anti-clockwise"}),g.newSlider({part:"leg-r",origin:"511px 726px",rotate:"clockwise",degree:50}),g.newSlider({part:"leg-l",origin:"513px 726px",rotate:"anti-clockwise",degree:50}),g.addEventListener("sliderChanged",(function(e){var t,n;"legL"!==e&&"legR"!==e||(t=g,clearTimeout(_),_=setTimeout((function(){parseInt(t.sliders.legR.value)+parseInt(t.sliders.legL.value)>=15&&(n=t.mode.current,t.disable(),t.mode.current="😭",m.addEventListener("animationend",(function(){setTimeout((function(){t.changeMode(n,!0),t.enable(),t.reset()}),1e3)})))}),1e3)),"legL"===e&&function(e){f.style.transform="rotate(".concat(e<y?e+.25*(e-y):e,"deg)");y=e,setTimeout((function(){f.style.transform="rotate(".concat(e,"deg)")}),400)}(g.rotateValue)})),g.addEventListener("modeChanged",(function(e,t){"😴"==e?g.changeSlider(g.sliders.head,10):"😴"==t&&g.changeSlider(g.sliders.head,0)})),ballonSwitch.addEventListener("change",(function(){ballonSwitch.checked?h.classList.remove("❌"):h.classList.add("❌")}));var y=0;document.querySelector(".controller__toggle").addEventListener("click",(function(){document.querySelector(".controller").classList.toggle("close"),this.classList.toggle("close")})),window.randomPosition=function(){return g.random()};var k,_,b="",w=1;k=g,setInterval((function(){b=v.style.transform.split(" ")[0],k.changing||(v.style.transform="".concat(b," translateY(").concat(w*("😡"==k.currentMode?4:1),"px)")),w=-w}),600)}]);